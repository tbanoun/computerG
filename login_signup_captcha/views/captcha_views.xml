<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--    ===== PAGE DE CONNEXION =====-->
    <template id="login" inherit_id="web.login" name="Login with reCAPTCHA">

        <xpath expr="//div[contains(@t-attf-class, 'oe_login_buttons')]"
               position="before">

            <!-- IntÃ©gration reCAPTCHA v2 -->
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                function validateCaptcha() {
                    const response = grecaptcha.getResponse();
                    if (!response) {
                        document.getElementById('recaptcha-error').style.display = 'block';
                        return false;
                    }
                    return true;
                }

                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_login_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            if (!validateCaptcha()) {
                                e.preventDefault();
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>

    <!-- ===== PAGE D'INSCRIPTION ===== -->

    <template id="signup" inherit_id="auth_signup.signup" name="Signup with reCAPTCHA">
        <xpath expr="//div[contains(@class, 'oe_login_buttons')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>


    <!-- ===== PAGE Trade-In Your Device ===== -->
    <template id="s_website_form" inherit_id="website.s_website_form" name="Trade-In Your Device reCAPTCHA">
        <xpath expr="//div[contains(@class, 's_website_form_submit')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>


    <!-- ===== PAGE Product Part Request ===== -->
    <template id="product_part_request_new" inherit_id="nce_product_part_request.product_part_request_new"
              name="Product Part Request reCAPTCHA">
        <xpath expr="//div[contains(@class, 's_website_form_submit')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>


    <!-- ===== PAGE Trade-In Your Device ===== -->
    <template id="contactus" inherit_id="website.contactus" name="Contactus reCAPTCHA">
        <xpath expr="//div[contains(@class, 's_website_form_submit')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group ml-4" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>

    <!--website_mass_mailing-->
    <!-- ===== PAGE Trade-In Your Device 3 ===== -->
    <template id="s_newsletter_block_form_template"
              inherit_id="website_mass_mailing.s_newsletter_block_form_template"
              name="newsletter block form template reCAPTCHA">
        <xpath expr="//div[contains(@class, 's_website_form_submit')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group ml-4" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>


    <!-- ===== PAGE Trade-In Your Device 3 ===== -->
    <template id="extra_info" inherit_id="website_sale.extra_info"
              name="s newsletter block form template reCAPTCHA">
        <xpath expr="//div[contains(@class, 's_website_form_submit')]"
               position="before">
            <script src="https://www.google.com/recaptcha/api.js" async="async" defer="defer"/>

            <div class="form-group ml-4" style="margin: 15px 0;">
                <div class="g-recaptcha" data-sitekey="6Lccex4rAAAAAObaQPCJ9ECIoNMdG8yOXJTHXv2x"/>
                <div id="recaptcha-error-signup" style="color: red; display: none;">
                    Veuillez cocher la case "Je ne suis pas un robot".
                </div>
            </div>

            <script><![CDATA[
                document.addEventListener('DOMContentLoaded', function() {
                    const form = document.querySelector('.oe_signup_form');
                    if (form) {
                        form.addEventListener('submit', function(e) {
                            const response = grecaptcha.getResponse();
                            if (!response) {
                                e.preventDefault();
                                document.getElementById('recaptcha-error-signup').style.display = 'block';
                            }
                        });
                    }
                });
            ]]></script>
        </xpath>
    </template>


</odoo>