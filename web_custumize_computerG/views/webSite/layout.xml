<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>

        <template id="cart_lines" inherit_id="website_sale.cart_lines" name="Shopping Cart Lines">
            <xpath expr="//table[@id='cart_products']/tbody//td[hasclass('td-product_name')]" position="replace">
                <t t-set="check_qty" t-value="line.product_id.virtual_available - line.product_uom_qty"/>
                <t t-set="check_qty_wt" t-value="line.product_id.qty_available_wt - line.product_uom_qty"/>
                <td class='td-product_name'>
                    <style>
                        .cls-sahrane p{
                        display: contents !important;
                        }
                    </style>
                    <div>
                        <a class="tp-link-dark" t-att-href="line.product_id.website_url">
                            <span t-out="line.product_id.display_name"/>
                        </a>
                        <span>
                        </span>
                    </div>
                    <ul class="list-inline mb-1">
                        <!--1-->
                        <!--init value-->
                        <!--set showDelivryMessage-->
                        <t t-set="showDelivryMessage" t-value="line.product_id.showDelivryMessage"/>
                        <!--set virtual_available-->
                        <t t-set="virtual_available" t-value="0"/>
                        <t t-if="line.product_id.virtual_available > 0">
                            <t t-set="virtual_available"
                               t-value="int(line.product_id.virtual_available)"/>
                        </t>
                        <!--set qty_available_wt-->
                        <t t-set="qty_available_wt" t-value="0"/>
                        <t t-if="line.product_id.qty_available_wt > 0 and showDelivryMessage">
                            <t t-set="qty_available_wt" t-value="int(line.product_id.qty_available_wt)"/>
                        </t>
                        <t t-set="qtyReset" t-value="line.product_uom_qty - (virtual_available+qty_available_wt)"/>


                        <!--on stock-->
                        <t t-set="qtyResetOnStock" t-value="line.product_uom_qty"/>
                        <t t-if="qtyResetOnStock >= virtual_available and virtual_available > 0">
                            <t t-set="virtual_available" t-value="virtual_available"/>
                            <t t-set="qtyResetOnStock" t-value="qtyResetOnStock - virtual_available"/>
                        </t>
                        <t t-elif="virtual_available >= line.product_uom_qty">
                            <t t-set="virtual_available" t-value="qtyResetOnStock"/>
                            <t t-set="qtyResetOnStock" t-value="0"/>
                        </t>

                        <!--on remote stock-->
                        <t t-set="qtyResetOnRemoteStock" t-value="0"/>
                        <t t-if="qtyResetOnStock > 0">
                            <t t-if="qtyResetOnStock > qty_available_wt and qty_available_wt > 0">
                                <t t-set="qty_available_wt" t-value="qty_available_wt"/>
                                <t t-set="qtyResetOnRemoteStock" t-value="qtyResetOnStock - qty_available_wt"/>
                            </t>
                            <t t-elif="qty_available_wt > qtyResetOnStock">
                                <t t-set="qtyResetOnRemoteStock" t-value="0"/>
                                <t t-set="qty_available_wt" t-value="qtyResetOnStock"/>
                            </t>
                        </t>
                        <t t-if="qtyResetOnRemoteStock > 0">
                            <t t-set="qtyReset" t-value="qtyResetOnRemoteStock"/>
                        </t>
                        <!--show message delivery stock -->
                        <!--cas 1 virtual_available > 0-->
                        <div t-if="virtual_available > 0">
                            <div class="row mt-3 mb-3">
                                <div class="col-12">
                                    <b>
                                        <span style="
                                                font-family: 'Poppins', sans-serif !important;
                                                font-weight: 500 !important;
                                                background: rgba(242, 250, 246, 0.5) !important; /* F2FAF6 avec 50% d'opacité */
                                                padding: 0.4rem 0.6rem !important;
                                                width: fit-content !important;
                                                border-radius: 4px !important;
                                                color: #116F41 !important; /* Nouvelle couleur de texte */
                                                font-size: 10pt !important; /* Nouvelle taille de police */
                                                border: 0.5px solid #116F41 !important; /* Nouvelle couleur + taille de bordure */
"
                                              class="ml-2 text-right alert alert-success w-40">
                                            <span class="cls-sahrane">
                                                <span class="cls-sahrane" t-esc="int(virtual_available)"/>
                                                Units in Stock |
                                            </span>
                                            <span class="cls-sahrane"
                                                  t-esc="line.product_id.messageDelivryTimeStock">
                                            </span>
                                        </span>
                                    </b>
                                </div>
                            </div>
                        </div>
                        <!--cas 2 qty_available_wt > 0 and line.product_uom_qty > virtual_available-->
                        <t t-if="line.product_uom_qty > virtual_available and qty_available_wt > 0 ">
                            <div class="col-12 mt-3 mb-3">
                                <b>
                                    <span style="
font-family: 'Poppins', sans-serif !important;
    font-weight: 500 !important;
    background: rgba(246, 242, 250, 0.5) !important; /* F6F2FA avec 50% d'opacité */
    padding: 0.4rem 0.6rem !important;
    width: fit-content !important;
    border-radius: 4px !important; /* Nouvelle valeur */
    color: #6F1152 !important; /* Correction de F6F1152 en #6F1152 */
    font-size: 10pt !important; /* Nouvelle taille */
    border: 0.5px solid #6F1152 !important; /* Nouvelle couleur + taille de bordure */
"
                                          class="ml-2 text-right alert alert-success w-40">
                                        <span t-esc="int(qty_available_wt)"/>
                                        Units in Remote Stock |
                                        <span class="cls-sahrane"
                                              t-esc="line.product_id.messageDelivryTimeRemoteStock">
                                        </span>
                                    </span>
                                </b>
                            </div>
                        </t>
                        <!--cas 3 qtyReset > 0-->
                        <t t-if="qtyReset > 0 and line.product_id.continue_seling">
                            <div class="col-12 mt-3 mb-3">
                                <b>
                                    <span style="
                                                    font-family: 'Poppins', sans-serif !important;
    font-weight: 600 !important; /* Poppins Semi Bold */
    background: rgba(255, 232, 232, 0.5) !important;
    padding: 0.4rem 0.6rem !important;
    width: fit-content !important;
    border-radius: 4px !important;
    color: #F45454 !important;
    font-size: 10pt !important;
    border: 0.5px solid #F45454 !important;
                                                    "
                                          class="ml-2 text-right alert alert-warning w-40">
                                        <t t-if="line.product_id.continue_seling">
                                            <span t-esc="int(qtyReset)"/>
                                            Units |
                                        </t>
                                        <span class="cls-sahrane" t-esc="line.product_id.out_of_stock_message">
                                        </span>
                                    </span>
                                </b>
                            </div>
                        </t>
                    </ul>
                </td>

            </xpath>

        </template>


    </data>
</odoo>